!function(r){"use strict";function s(){return document.fullscreen||document.mozFullScreen||document.webkitIsFullScreen||!1}function o(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen()}var e;r.support.fullscreen="requestFullscreen"in(e=document.documentElement)||"mozRequestFullScreen"in e&&document.mozFullScreenEnabled||"webkitRequestFullScreen"in e,r.fn.fullScreen=function(e){if(!r.support.fullscreen||1!==this.length)return this;if(s())return o(),this;var n,l,c=r.extend({background:"#111",callback:r.noop(),fullscreenClass:"fullScreen"},e),u=this,t=r("<div>",{css:{"overflow-y":"auto",background:c.background,width:"100%",height:"100%"}}).insertBefore(u).append(u);return u.addClass(c.fullscreenClass),(n=t.get(0)).requestFullscreen?n.requestFullscreen():n.mozRequestFullScreen?n.mozRequestFullScreen():n.webkitRequestFullScreen&&n.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT),t.click(function(e){e.target==this&&o()}),u.cancel=function(){return o(),u},l=function(e){e||(r(document).off("fullscreenchange mozfullscreenchange webkitfullscreenchange"),u.removeClass(c.fullscreenClass).insertBefore(t),t.remove()),c.callback&&c.callback(e)},r(document).on("fullscreenchange mozfullscreenchange webkitfullscreenchange",function(){l(s())}),u},r.fn.cancelFullScreen=function(){return o(),this}}(jQuery);