"use strict";!function(){function c(e){var t;document.createEvent?(t=document.createEvent("HTMLEvents")).initEvent("change",!0,!0):(t=document.createEventObject()).eventType="change",t.eventName="change",document.createEvent?e.dispatchEvent(t):e.fireEvent("on"+t.eventType,t)}var t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiYWRtaW4iOnRydWV9.TJVA95OrM7E2cBab30RMHrHDcEfxjoYZgeFONFh7HgQ",a="eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiYWRtaW4iOnRydWV9.EkN-DOsnsuRjRO6BxXemmJDm3HbxrbRzXglbN2S4sOkopdU4IsDxTI8jO19W_A4K8ZPJijNLis4EZsHeY559a4DFOd50_OqgHGuERTqYZyuhtF39yxJPAjUESwxk2J5k_4zM3O-vtd1Ghyo4IbqKKSy6J9mTniYJPenn5-HIirE",n="-----BEGIN PUBLIC KEY-----\nMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDdlatRjRjogo3WojgGHFHYLugdUWAY9iR3fy4arWNA1KoS8kVw33cJibXr8bvwUAUparCwlvdbH6dvEOfou0/gCFQsHUfQrSDv+MuSUMAe8jzKE4qW+jK+xQU9a03GUnKHkkle+Q0pX/g6jXZ7r1/xAK5Do2kQ+X5xK9cipRgEKwIDAQAB\n-----END PUBLIC KEY-----  ",r="-----BEGIN RSA PRIVATE KEY-----\nMIICWwIBAAKBgQDdlatRjRjogo3WojgGHFHYLugdUWAY9iR3fy4arWNA1KoS8kVw33cJibXr8bvwUAUparCwlvdbH6dvEOfou0/gCFQsHUfQrSDv+MuSUMAe8jzKE4qW+jK+xQU9a03GUnKHkkle+Q0pX/g6jXZ7r1/xAK5Do2kQ+X5xK9cipRgEKwIDAQABAoGAD+onAtVye4ic7VR7V50DF9bOnwRwNXrARcDhq9LWNRrRGElESYYTQ6EbatXS3MCyjjX2eMhu/aF5YhXBwkppwxg+EOmXeh+MzL7Zh284OuPbkglAaGhV9bb6/5CpuGb1esyPbYW+Ty2PC0GSZfIXkXs76jXAu9TOBvD0ybc2YlkCQQDywg2R/7t3Q2OE2+yo382CLJdrlSLVROWKwb4tb2PjhY4XAwV8d1vy0RenxTB+K5Mu57uVSTHtrMK0GAtFr833AkEA6avx20OHo61Yela/4k5kQDtjEf1N0LfI+BcWZtxsS3jDM3i1Hp0KSu5rsCPb8acJo5RO26gGVrfAsDcIXKC+bQJAZZ2XIpsitLyPpuiMOvBbzPavd4gY6Z8KWrfYzJoI/Q9FuBo6rKwl4BFoToD7WIUS+hpkagwWiz+6zLoX1dbOZwJACmH5fSSjAkLRi54PKJ8TFUeOP15h9sQzydI8zJU+upvDEKZsZc/UhT/SySDOxQ4G/523Y0sz/OZtSWcol/UMgQJALesy++GdvoIDLfJX5GBQpuFgFenRiRDabxrE9MNUZ2aPFaFp+DyAe+b4nDwuJaW2LURbr8AEZga7oQj0uYxcYw==\n  -----END RSA PRIVATE KEY-----  ",e=CodeMirror;function o(e){e.replaceSelection("   ","end")}var i,s=e(document.getElementsByClassName("js-input")[0],{mode:"jwt",theme:"night",lineWrapping:!0,extraKeys:{Tab:o}}),u=e(document.getElementsByClassName("js-header")[0],{mode:"application/json",lineWrapping:!0,extraKeys:{Tab:o},lint:!0}),d=e(document.getElementsByClassName("js-payload")[0],{mode:"application/json",lineWrapping:!0,extraKeys:{Tab:o},lint:!0}),l=$('input[name="algorithm"]'),v=$('input[name="token-type"]');function g(e,t,a){e.off("change",m),null!==t.result&&void 0!==t.result?e.setValue(t.result):e.setValue(""),t.error?a.addClass("error"):a.removeClass("error"),e.on("change",m)}function p(e){var t=E(e);if(t){var a=t.split("."),n=document.getElementsByName("secret")[0];if(h("js-signature")){var r,o,i=window.decode(a[0]);try{r=JSON.parse(i.result).alg,(o=$('.algorithm input[value="'+r+'"]')).prop("checked",!0),c(o.get(0))}catch(e){console.error("Invalid header decoded")}var s=$(".jwt-header");g(u,i,s);var l=window.decode(a[1]),s=$(".jwt-payload");g(d,l,s),c(n),window.matchMedia("(min-width: 768px)").matches&&autoHeightInput()}}}function m(e){s.off("change",p);var t,a,n=k(),r=document.getElementsByName("secret")[0],o=document.getElementsByName("is-base64-encoded")[0],i=window.sign(n,u.getValue(),d.getValue(),j(n,"sign"),o.checked);i.error?(s.setValue(""),t={payload:".jwt-payload",header:".jwt-header"},$(".jwt-payload").removeClass("error"),$(".jwt-header").removeClass("error"),i.error.who&&i.error.who.map(function(e){return t[e]}).forEach(function(e){$(e).addClass("error")}),$(".input").addClass("error"),i.result?s.setValue(i.result):s.setValue("")):(s.setValue(i.result),$(".input").removeClass("error"),$(".jwt-payload").removeClass("error"),$(".jwt-header").removeClass("error"),a=i.result,safeLocalStorageSetItem("jwtValue",a)),s.on("change",p),c(r)}function h(e){var t=document.getElementsByClassName(e);return t.length?t[0]:null}function E(e){var t=e.getValue();return t?t.replace(/\s/g,""):null}s.on("change",p),d.on("change",m),u.on("change",m);var I,f=document.getElementsByName("secret")[0],w=document.getElementsByName("is-base64-encoded")[0];function y(){var e,t,a,n,r=k(),o=h("js-signature"),i=h("jwt-signature");o&&(e=E(s),!(t=w.checked)||window.isValidBase64String(f.value)?($(i).removeClass("error"),a=(n=window.verify(r,e,j(r,"verify"),t)).error,n=n.result,!a&&n?($(o).removeClass("invalid-token"),$(o).addClass("valid-token"),o.innerHTML='<i class="icon-budicon-499"></i> signature verified'):($(o).removeClass("valid-token"),$(o).addClass("invalid-token"),o.innerHTML='<i class="icon-budicon-501"></i> invalid signature')):$(i).addClass("error"))}function j(e,t){var a=$('input[name="secret"]'),n=$('textarea[name="private-key"]'),r=$('textarea[name="public-key"]');return"HS256"===e?a.val():"sign"===t?n.val():r.val()}function k(){return l.filter(":checked").val()}function C(){var e=l.filter(":checked").val();$(".js-input").attr("data-alg",e),$(".jwt-signature pre").hide().filter("."+e).show(),"id_token"===A()&&E(s)===t&&"RS256"===e?(s.setValue(a),$(".jwt-signature textarea[name=public-key]").val(n),$(".jwt-signature textarea[name=private-key]").val(r)):"id_token"===A()&&E(s)===a&&"HS256"===e&&s.setValue(t)}function A(){return v.filter(":checked").val()}if(C(),l.on("change",function(){C(),y()}),v.on("change",function(){!function(){var e=A();if(document.location.hash){var t=document.location.hash.slice(1),a={};if((t=t.split("&")).forEach(function(e){e=e.split("="),a[e[0]]=e[1]}),a[e])s.setValue(decodeURIComponent(a[e]))}}(),C(),y()}),$('.jwt-signature textarea[name="public-key"]').on("input",y),$('.jwt-signature textarea[name="private-key"]').on("input",function(){(function(){var e=$(this),t="public-key"===e.prop("name")?/-----BEGIN (PUBLIC KEY|CERTIFICATE)-----(.|\n)*-----END (PUBLIC KEY|CERTIFICATE)-----/.test(e.val()):/-----BEGIN RSA PRIVATE KEY-----(.|\n)*-----END RSA PRIVATE KEY-----/.test(e.val());t?e.removeClass("error"):e.addClass("error")}).apply(this),m()}),f.addEventListener("change",y,!1),f.addEventListener("keyup",y,!1),w.addEventListener("change",y,!1),document.location.search){var R=document.location.search.slice(1),b={};if((R=R.split("&")).forEach(function(e){e=e.split("="),b[e[0]]=e[1]}),b.value)return s.setValue(decodeURIComponent(b.value))}if(document.location.hash){R=document.location.hash.slice(1),b={};if((R=R.split("&")).forEach(function(e){e=e.split("="),b[e[0]]=e[1]}),b.access_token&&b.id_token&&$(".jwt-playground .selections .token-type").show(),b.id_token)return s.setValue(decodeURIComponent(b.id_token));if(b.access_token)return s.setValue(decodeURIComponent(b.access_token))}I=localStorage.getItem("jwtValue"),i=I||t,s.setValue(i),localStorage.removeItem("jwtValue")}();