!function(){function c(t,e,n,i){t=document.createElement(t);return t.setAttribute("id",e),t.setAttribute("class",n),t.setAttribute("style",i),t}function t(){t=window.pfSiteData.site_url+"/wp-includes/js/tinymce/tinymce.min.js",(e=document.createElement("script")).src=t,window.pfnt.windows.scripts.push(e);var t=e,e=(t.onload=function(){console.log("init nt wysiwyg"),window.initEditor()},document.getElementsByTagName("head")[0]),t=(e.prepend(t),document.createElement("style"));t.innerHTML='#wp-nomthis-editor-container { width: 100%; } \n #pressforward-nt { color: #111; } \n #pressforward-nt h1, #pressforward-nt h2, #pressforward-nt h3, #pressforward-nt h5 { color: #111; } \n #pressforward-nt input { color: #111; margin-bottom: 1px; } \n .pressforward-nt__inputfield { width:100%; display:block; color: #111; } \n #pressforward-nt input { color: #111; background-color: white; cursor: text; padding: 1px; border-width: 2px; border-style: inset; } \n .pressforward-nt__inner-container { height: 100%; } \n .meta-box { background-color: whitesmoke; } \n .meta-box img { max-height: 100%; } \n .meta-box h5 { font-family: "Arial Black", Gadget, sans-serif; border: 3px #bbbbbb inset; padding: 3px; height: 17%; margin-bottom: 2%; box-sizing: border-box; min-height: 33px; font-size: 14px; } \n .pressforward-nt__li-category-select-item { margin-bottom: 6px; padding: 0; line-height: 22px; word-wrap: break-word; } \n .pressforward-nt__li-category-select-item li { font-size: 16px; max-height: 25px; color: black; border-bottom-color: rgb(180, 185, 190); border-bottom-width: 1px; }  \n #pressforward-nt__right ul, #pressforward-nt__right li { list-style-type: none; } \n #pressforward-nt__right ul .select-inner-text { margin-left: 4px; vertical-align: middle; } \n #pressforward-nt__preview-category-container__inner input[type=checkbox], #pressforward-nt__preview-category-container__inner label { cursor: pointer; } \n '+window.pfSiteData.fontFace,window.pfnt.windows.styleBlocks.push(t),e.prepend(t)}function i(d,e){var n="";e?n="?page="+e:e=1,new Promise(function(o,t){var r=new XMLHttpRequest;r.open("GET",window.pfSiteData.categories_endpoint+n,!0),r.addEventListener("load",function(t){var e,n,i;4==r.readyState&&200==r.status?(e=JSON.parse(r.responseText),n=r.getResponseHeader("X-WP-Total"),i=r.getResponseHeader("X-WP-TotalPages"),console.log("cat list:",e,n,i),e.reduce(function(t,e,n,i){return t.then(function(){return function w(p,l){return new Promise(function(e,t){if(null!==(d=window.document.getElementById("category-"+l.id)))return e(!0),!0;var i,o,r,d=c("li","category-"+l.id,"pressforward-nt__li-category-select-item"),n=c("label","","selectit",""),a=c("input","in-category-"+l.id,"pressforward-nt__li-select-item__input",""),s=(a.setAttribute("value",l.id),a.setAttribute("type","checkbox"),a.setAttribute("name","post_category[]"),c("span","","select-inner-text",""));s.innerHTML=l.name,n.appendChild(a),n.appendChild(s),d.prepend(n),0!==l.parent?(i=window.document.querySelector("#category-"+l.parent+" ul"),o=window.document.getElementById("category-"+l.parent),null===i&&null===o?((r=new XMLHttpRequest).open("GET",l._links.up[0].href,!0),r.addEventListener("load",function(t){var n;4==r.readyState&&200==r.status?(n=JSON.parse(r.responseText),console.log("cat parent:",n),e(new Promise(function(e,t){w(p,n).then(function(){o=window.document.getElementById("category-"+l.parent);var t=c("ul","","select-inner-text","");o.appendChild(t),(i=t).appendChild(d),e(!0)})}))):(console.log(n),alert("Cat retrieve failed"),e(!1))}),r.send()):((null===i?(a=c("ul","","select-inner-text",""),o.appendChild(a),i=a):i).appendChild(d),e(!0))):(p.appendChild(d),e(!0))})}(d,e)})},Promise.resolve([])).then(function(t){o({totalPages:i})})):(console.log(e),alert("Cat retrieve failed"))}),r.send()}).then(function(t){e+1<=t.totalPages&&i(d,e+1)})}var e,n,o,r,d,a;console.log("Nominate This Setup"),null!==document.getElementById("pressforward-nt")&&window.pfnt_deactivate(),window.pfnt={},window.pfnt.windows={},window.pfnt.windows.links=[],window.pfnt.windows.scripts=[],window.pfnt.windows.styleBlocks=[],window.pfnt.styles={},window.pfnt.tools={},window.pfReadability={},window.pfnt.key=window.ku,window.pfnt.selection=window.getSelection().toString(),window.pfnt.submitObject={post_title:!1,item_link:window.location.href,pf_source_link:window.location.origin,post_status:!1,content:!1,tax_input:!1,item_feat_img:!1,item_author:!1,post_tags:!1,user_key:window.ku,photo_src:[],photo_description:[],action:"post"},window.pfnt,r=window.pfnt.windows,d=window.pfnt.styles,window.pfnt.tools,a=document.cloneNode(!0),window.pfReadability.article=new Readability(a).parse(),r.mainWindow=c("div","pressforward-nt","nomthis-wrapper",""),r.innerWindow=c("div","pressforward-nt__inner","nomthis-inner-wrapper",""),r.titleField=c("input","pressforward-nt__inputfield__title","pressforward-nt__inputfield",""),r.titleField.setAttribute("type","text"),window.pfReadability.article.title<=1?r.titleField.setAttribute("value",window.pfMetaData.title):r.titleField.setAttribute("value",window.pfReadability.article.title),r.bylineField=c("input","pressforward-nt__inputfield__byline","pressforward-nt__inputfield",""),r.bylineField.setAttribute("type","text"),window.pfMetaData&&window.pfMetaData.hasOwnProperty("author")?r.bylineField.setAttribute("value",window.pfMetaData.author):window.pfReadability&&window.pfReadability.hasOwnProperty("article")&&window.pfReadability.article.hasOwnProperty("byline")&&window.pfReadability.article.byline.length<=1&&r.bylineField.setAttribute("value",window.pfReadability.article.byline),d.mwStyles="position: fixed;width: 76%;height: 550px;display: block;background: #c7c7c7;top: 0;left: 12%;padding: 1px;box-sizing: border-box;z-index: 9999990000;",d.iwStyles="position: relative;width: 100%;height: 100%;background: white;border: #afceaf 3px solid;box-sizing: border-box;",r.mainWindow.setAttribute("style",d.mwStyles),r.innerWindow.setAttribute("style",d.iwStyles),r.innerLeft=c("div","pressforward-nt__left","pressforward-nt__inner-container","float:left; width:60%"),r.innerRight=c("div","pressforward-nt__right","pressforward-nt__inner-container","float:right; width:37%; padding-left: 1%; padding: 0 10px;"),a="",a=2<window.pfnt.selection.length?window.pfnt.selection:window.pfReadability.article.content,document.getElementsByTagName("body")[0].prepend(window.pfnt.windows.mainWindow),window.pfnt.windows.mainWindow.appendChild(window.pfnt.windows.innerWindow),window.pfnt.windows.innerWindow.appendChild(window.pfnt.windows.innerLeft),window.pfnt.windows.innerWindow.appendChild(window.pfnt.windows.innerRight),window.pfnt.windows.innerLeft.appendChild(window.pfnt.windows.titleField),window.pfnt.windows.innerLeft.appendChild(window.pfnt.windows.bylineField),window.pfnt.windows.innerLeft.appendChild((d=a,r=c("div","wp-nomthis-editor-container","wp-editor-container",""),c("div","qt_nomthis_toolbar","quicktags-toolbar",""),(a=c("textarea","nominateText","wp-editor-area","height:375px;")).setAttribute("name","post_content"),a.setAttribute("autocomplete","off"),a.setAttribute("cols","40"),a.innerHTML=d,r.appendChild(a),window.pfnt.windows.editorContainer=r)),d=window.pfnt.windows.innerRight,(a=c("div","pressforward-nt__preview-image","preview-image","background-image: url("+window.pfMetaData.image+");width: 100%;background-size: contain;background-repeat: no-repeat;background-position: center;background-color: transparent;height: 77%;display: block;box-sizing: border-box;")).src=window.pfMetaData.image,(r=c("div","pressforward-nt__preview-tags-container","meta-box pressforward-nt-box","height:18%; overflow:hidden; display: block;")).innerHTML='<h5>Tags</h5><input type="text" value="'+window.pfMetaData.keywords.join(", ")+'" style="width: 80%;height: 26px;font-size: small;margin-left: 10px;">',(e=c("div","pressforward-nt__preview-image-container","meta-box pressforward-nt-box","height:36%; overflow:hidden; display: block;")).innerHTML="<h5>Preview Image</h5>",e.appendChild(a),(a=c("div","pressforward-nt__button-container","meta-box pressforward-nt-box","height:12%; overflow:hidden; display: block;")).innerHTML='<button id="submit-button" role="presentation" type="button" tabindex="-1" style="width: 100px; height: 30px; margin: 22px 10px; float: right; font-size: 14px;" onclick="window.pfntSubmit(true)">Submit</button>',a.innerHTML+='<button id="nominate-button" role="presentation" type="button" tabindex="-1" style="width: 100px; height: 30px; margin: 22px 10px; float: right; font-size: 14px;" onclick="window.pfntSubmit(false)">Nominate</button>',(n=c("div","pressforward-nt__preview-category-container","meta-box pressforward-nt-box","height:34%; overflow:hidden; display: block;")).innerHTML="<h5>Categories</h5>",o=c("ul","pressforward-nt__preview-category-container__inner","checkable-list-container","margin-left: 5px; height: 83%; width:100%; overflow:scroll; display: block;"),n.appendChild(o),i(o),d.appendChild(n),d.appendChild(r),d.appendChild(e),d.appendChild(a),window.initEditor=function(){window.ntEditor=tinymce.init({selector:"#nominateText"})},t()}(),window.pfnt_deactivate=function(){for(var t=window.pfnt.windows.mainWindow;t.hasChildNodes();)!function t(e){for(;e.hasChildNodes();)t(e.firstChild);e.parentNode.removeChild(e);console.log(e,"cleared!")}(t.firstChild);window.pfnt.windows.mainWindow.remove()},window.pfntSubmit=function(t){for(categoryCheckbox in console.log("Submitting to PressForward"),window.pfnt.submitObject.post_title=window.document.getElementById("pressforward-nt__inputfield__title").value,window.pfnt.submitObject.item_author=window.document.getElementById("pressforward-nt__inputfield__byline").value,window.pfnt.submitObject.content=tinymce.activeEditor.dom.doc.body.innerHTML,window.pfnt.submitObject.item_feat_img=window.pfMetaData.image,window.pfnt.submitObject.post_tags=window.document.querySelector("#pressforward-nt__preview-tags-container input").value,window.pfnt.submitObject.post_category="",window.document.getElementsByClassName("pressforward-nt__li-select-item__input"))!0===categoryCheckbox.checked&&(window.pfnt.submitObject.post_category+=categoryCheckbox.value+",");window.pfnt.submitObject.post_category+="",t&&(window.pfnt.submitObject.publish="Last Step",window.pfnt.submitObject.post_status="publish");var n=[],i=(Object.keys(window.pfnt.submitObject).forEach(function(t){var e;window.pfnt.submitObject[t]&&(e="string"==typeof window.pfnt.submitObject[t]?window.pfnt.submitObject[t].trim():window.pfnt.submitObject[t],n.push(encodeURIComponent(t.trim())+"="+encodeURIComponent(e)))}),t=n.join("&").replace(/%20/g,"+"),new XMLHttpRequest);i.open("POST",pfSiteData.submit_endpoint,!0),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.addEventListener("load",function(t){var e;4==i.readyState&&200==i.status?(e=JSON.parse(i.responseText),console.log(e)):(console.log(e),alert("Nomination failed"))});i.send(t)};